/* ===========================
   NEONCHAT — style.css
   Cyberpunk Dark Terminal
=========================== */

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:        #050810;
  --bg2:       #080d1a;
  --bg3:       #0d1428;
  --panel:     #0a1020;
  --border:    rgba(0, 240, 200, 0.15);
  --neon:      #00f0c8;
  --neon2:     #00aaff;
  --neon3:     #ff00aa;
  --text:      #c8e0ff;
  --text-dim:  #4a6080;
  --text-muted:#2a3850;
  --danger:    #ff4060;
  --success:   #00f0c8;
  --radius:    6px;
  --font-mono: 'Share Tech Mono', monospace;
  --font-main: 'Exo 2', sans-serif;
}

html, body {
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-main);
  overflow: hidden;
}

/* Scanline effect */
.scanline {
  pointer-events: none;
  position: fixed; inset: 0; z-index: 9999;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.08) 2px,
    rgba(0,0,0,0.08) 4px
  );
}
.noise {
  pointer-events: none;
  position: fixed; inset: 0; z-index: 9998;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ============ SCREENS ============ */
.screen { display: none; height: 100vh; }
.screen.active { display: flex; }

/* ============ AUTH ============ */
#auth-screen {
  align-items: center; justify-content: center;
  background: radial-gradient(ellipse 60% 60% at 50% 50%, #0a1a30, var(--bg));
}

.auth-container {
  width: 420px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 48px 40px;
  box-shadow: 0 0 60px rgba(0,240,200,0.06), 0 0 120px rgba(0,0,0,0.8);
  animation: fade-up 0.5s ease;
}

@keyframes fade-up {
  from { opacity:0; transform: translateY(20px); }
  to   { opacity:1; transform: translateY(0); }
}

.logo-wrap { text-align: center; margin-bottom: 36px; }
.logo-glyph {
  font-size: 48px; color: var(--neon);
  text-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon);
  display: block; margin-bottom: 12px;
  animation: pulse-glow 3s ease-in-out infinite;
}
@keyframes pulse-glow {
  0%,100% { text-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon); }
  50%     { text-shadow: 0 0 30px var(--neon), 0 0 80px var(--neon), 0 0 120px rgba(0,240,200,0.3); }
}
.logo-text { font-size: 28px; font-weight: 700; letter-spacing: 6px; color: var(--neon); }
.logo-sub  { font-size: 11px; color: var(--text-dim); letter-spacing: 3px; margin-top: 6px; font-family: var(--font-mono); }

.input-group { margin-bottom: 20px; }
.input-label { display: block; font-size: 10px; letter-spacing: 3px; color: var(--neon); font-family: var(--font-mono); margin-bottom: 8px; }

input[type="text"] {
  width: 100%; background: var(--bg2);
  border: 1px solid var(--border); border-radius: var(--radius);
  padding: 12px 14px; color: var(--text);
  font-family: var(--font-mono); font-size: 14px;
  transition: border-color 0.2s, box-shadow 0.2s;
  outline: none;
}
input[type="text"]:focus {
  border-color: var(--neon);
  box-shadow: 0 0 0 3px rgba(0,240,200,0.1), inset 0 0 10px rgba(0,240,200,0.05);
}
input::placeholder { color: var(--text-muted); }

.btn-primary {
  width: 100%; margin-top: 8px;
  background: linear-gradient(135deg, rgba(0,240,200,0.15), rgba(0,170,255,0.15));
  border: 1px solid var(--neon); border-radius: var(--radius);
  color: var(--neon); font-family: var(--font-mono); font-size: 13px; letter-spacing: 4px;
  padding: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;
  transition: all 0.2s; position: relative; overflow: hidden;
}
.btn-primary:hover {
  background: rgba(0,240,200,0.2);
  box-shadow: 0 0 20px rgba(0,240,200,0.3);
  transform: translateY(-1px);
}
.btn-primary:active { transform: translateY(0); }
.btn-arrow { transition: transform 0.2s; }
.btn-primary:hover .btn-arrow { transform: translateX(4px); }

.auth-status { margin-top: 16px; text-align: center; font-size: 12px; font-family: var(--font-mono); min-height: 20px; }
.auth-status.error { color: var(--danger); }
.auth-status.success { color: var(--success); }

/* ============ CHAT LAYOUT ============ */
#chat-screen { flex-direction: column; }
.chat-layout { display: flex; height: 100vh; overflow: hidden; }

/* ============ SIDEBAR ============ */
.sidebar {
  width: 260px; flex-shrink: 0;
  background: var(--bg2);
  border-right: 1px solid var(--border);
  display: flex; flex-direction: column;
  overflow: hidden;
}

.sidebar-header { padding: 20px 16px; border-bottom: 1px solid var(--border); }
.user-badge { display: flex; align-items: center; gap: 10px; }
.avatar {
  width: 36px; height: 36px; border-radius: 50%;
  background: linear-gradient(135deg, var(--neon), var(--neon2));
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 14px; color: var(--bg); flex-shrink: 0;
}
.user-name { display: block; font-weight: 600; font-size: 13px; color: var(--text); }
.user-status { display: block; font-size: 10px; color: var(--neon); font-family: var(--font-mono); letter-spacing: 1px; }

.sidebar-section { padding: 16px; flex: 1; overflow-y: auto; }
.sidebar-section:first-of-type { flex: 0 0 auto; }
.section-title { font-size: 9px; letter-spacing: 3px; color: var(--text-dim); font-family: var(--font-mono); margin-bottom: 10px; }

.room-list, .user-list { list-style: none; }
.room-list li, .user-list li {
  padding: 8px 10px; border-radius: var(--radius); cursor: pointer;
  font-size: 13px; color: var(--text-dim); display: flex; align-items: center; gap: 8px;
  transition: background 0.15s, color 0.15s; margin-bottom: 2px;
}
.room-list li:hover { background: rgba(0,240,200,0.07); color: var(--text); }
.room-list li.active { background: rgba(0,240,200,0.12); color: var(--neon); }
.room-list li .hash { font-family: var(--font-mono); color: inherit; opacity: 0.6; }

.user-list li { cursor: default; font-family: var(--font-mono); font-size: 12px; }
.user-list li .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--neon); flex-shrink: 0; box-shadow: 0 0 6px var(--neon); }
.user-list li.me .dot { background: var(--neon2); box-shadow: 0 0 6px var(--neon2); }

.btn-new-room {
  width: 100%; margin-top: 8px; padding: 7px;
  background: transparent; border: 1px dashed var(--border);
  border-radius: var(--radius); color: var(--text-dim); font-size: 11px;
  font-family: var(--font-mono); letter-spacing: 1px; cursor: pointer;
  transition: all 0.2s;
}
.btn-new-room:hover { border-color: var(--neon); color: var(--neon); background: rgba(0,240,200,0.05); }

.sidebar-footer { padding: 12px 16px; border-top: 1px solid var(--border); }
.btn-logout {
  width: 100%; padding: 9px; background: transparent;
  border: 1px solid rgba(255,64,96,0.3); border-radius: var(--radius);
  color: var(--danger); font-size: 11px; font-family: var(--font-mono); letter-spacing: 2px;
  cursor: pointer; transition: all 0.2s;
}
.btn-logout:hover { background: rgba(255,64,96,0.1); border-color: var(--danger); }

/* ============ CHAT MAIN ============ */
.chat-main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

.chat-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 24px; border-bottom: 1px solid var(--border);
  background: var(--panel); flex-shrink: 0;
}
.room-info { display: flex; align-items: center; gap: 6px; }
.room-hash { font-family: var(--font-mono); font-size: 18px; color: var(--neon); }
.room-name { font-size: 16px; font-weight: 600; color: var(--text); }
.header-actions { display: flex; align-items: center; gap: 14px; }
.users-count { font-size: 11px; font-family: var(--font-mono); color: var(--text-dim); }
.btn-icon { background: transparent; border: none; font-size: 16px; cursor: pointer; opacity: 0.5; transition: opacity 0.2s; }
.btn-icon:hover { opacity: 1; }

/* ============ MESSAGES ============ */
.messages-container {
  flex: 1; overflow-y: auto; padding: 24px;
  display: flex; flex-direction: column; gap: 4px;
  scroll-behavior: smooth;
}
.messages-container::-webkit-scrollbar { width: 4px; }
.messages-container::-webkit-scrollbar-track { background: transparent; }
.messages-container::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

.welcome-msg {
  text-align: center; margin: auto; opacity: 0.4; padding: 40px 20px;
}
.welcome-glyph { font-size: 40px; color: var(--neon); margin-bottom: 12px; }
.welcome-msg p { font-size: 13px; line-height: 1.7; color: var(--text-dim); }

/* Message groups */
.msg-group { display: flex; gap: 10px; padding: 4px 0; animation: msg-in 0.2s ease; }
@keyframes msg-in {
  from { opacity:0; transform: translateY(6px); }
  to   { opacity:1; transform: translateY(0); }
}
.msg-group.own { flex-direction: row-reverse; }

.msg-avatar {
  width: 32px; height: 32px; border-radius: 50%; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 12px; color: var(--bg); align-self: flex-end;
}

.msg-content { max-width: 65%; display: flex; flex-direction: column; gap: 2px; }
.msg-group.own .msg-content { align-items: flex-end; }

.msg-meta { display: flex; align-items: center; gap: 8px; padding: 0 4px; }
.msg-author { font-size: 11px; font-weight: 600; font-family: var(--font-mono); }
.msg-time { font-size: 10px; color: var(--text-dim); font-family: var(--font-mono); }

.msg-bubble {
  padding: 10px 14px; border-radius: 10px; font-size: 14px; line-height: 1.5;
  word-break: break-word; position: relative;
}
.msg-group:not(.own) .msg-bubble {
  background: var(--bg3); border: 1px solid var(--border);
  border-bottom-left-radius: 3px; color: var(--text);
}
.msg-group.own .msg-bubble {
  background: linear-gradient(135deg, rgba(0,240,200,0.15), rgba(0,170,255,0.15));
  border: 1px solid rgba(0,240,200,0.3);
  border-bottom-right-radius: 3px; color: var(--text);
}

/* System messages */
.msg-system {
  text-align: center; font-size: 11px; font-family: var(--font-mono);
  color: var(--text-dim); padding: 6px 0; letter-spacing: 1px;
  animation: msg-in 0.2s ease;
}
.msg-system span { background: var(--bg2); padding: 3px 10px; border-radius: 20px; border: 1px solid var(--border); }

/* Typing indicator */
.typing-indicator {
  padding: 4px 24px 0; height: 20px; font-size: 11px;
  font-family: var(--font-mono); color: var(--neon); letter-spacing: 1px;
}

/* ============ INPUT BAR ============ */
.chat-input-bar {
  display: flex; align-items: center; gap: 8px;
  padding: 12px 20px; border-top: 1px solid var(--border);
  background: var(--panel); flex-shrink: 0; position: relative;
}

.btn-emoji {
  background: transparent; border: none; font-size: 18px; cursor: pointer;
  opacity: 0.6; transition: opacity 0.2s, transform 0.2s; flex-shrink: 0;
}
.btn-emoji:hover { opacity: 1; transform: scale(1.2); }

#msg-input {
  flex: 1; background: var(--bg2);
  border: 1px solid var(--border); border-radius: 20px;
  padding: 10px 16px; color: var(--text);
  font-family: var(--font-main); font-size: 14px; outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}
#msg-input:focus {
  border-color: rgba(0,240,200,0.4);
  box-shadow: 0 0 0 3px rgba(0,240,200,0.07);
}

.char-count { font-size: 10px; font-family: var(--font-mono); color: var(--text-muted); min-width: 28px; text-align: right; }
.char-count.warn { color: var(--neon3); }
.char-count.danger { color: var(--danger); }

.btn-send {
  width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0;
  background: var(--neon); border: none; cursor: pointer; display: flex;
  align-items: center; justify-content: center;
  transition: all 0.2s; color: var(--bg);
}
.btn-send svg { width: 16px; height: 16px; }
.btn-send:hover { background: #00ffda; box-shadow: 0 0 16px rgba(0,240,200,0.5); transform: scale(1.05); }
.btn-send:active { transform: scale(0.95); }
.btn-send:disabled { background: var(--bg3); color: var(--text-dim); cursor: not-allowed; }

/* Emoji picker */
.emoji-picker {
  display: none; position: absolute; bottom: 72px; left: 16px;
  background: var(--panel); border: 1px solid var(--border); border-radius: 10px;
  padding: 10px; gap: 6px; flex-wrap: wrap; width: 200px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.5); z-index: 100;
  animation: pop-up 0.15s ease;
}
.emoji-picker.open { display: flex; }
@keyframes pop-up {
  from { opacity:0; transform: translateY(8px) scale(0.95); }
  to   { opacity:1; transform: translateY(0) scale(1); }
}
.emoji-picker span { font-size: 22px; cursor: pointer; transition: transform 0.15s; }
.emoji-picker span:hover { transform: scale(1.3); }

/* Scrollbar for sidebar */
.sidebar-section::-webkit-scrollbar { width: 3px; }
.sidebar-section::-webkit-scrollbar-thumb { background: var(--border); }

/* ============ RESPONSIVE ============ */
@media (max-width: 640px) {
  .sidebar { width: 200px; }
  .auth-container { width: 90%; padding: 32px 24px; }
  .msg-content { max-width: 80%; }
}

/* ============ AI STYLES ============ */

/* Sidebar AI panel */
.sidebar-ai {
  padding: 12px 16px;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  margin-bottom: 0;
}
.ai-status-row {
  display: flex; align-items: center; gap: 8px; margin-bottom: 8px;
}
.ai-dot {
  font-size: 10px; color: var(--text-dim);
  transition: color 0.3s, text-shadow 0.3s;
}
.ai-dot.active {
  color: var(--neon);
  text-shadow: 0 0 8px var(--neon);
  animation: pulse-dot 2s ease-in-out infinite;
}
@keyframes pulse-dot {
  0%,100% { opacity: 1; } 50% { opacity: 0.5; }
}
.ai-label { font-size: 11px; font-family: var(--font-mono); color: var(--text-dim); }
.ai-label.active { color: var(--neon); }

.btn-configure-ai {
  width: 100%; padding: 7px;
  background: rgba(0,240,200,0.07);
  border: 1px solid rgba(0,240,200,0.2);
  border-radius: var(--radius); color: var(--neon);
  font-size: 11px; font-family: var(--font-mono); letter-spacing: 1px;
  cursor: pointer; transition: all 0.2s;
}
.btn-configure-ai:hover {
  background: rgba(0,240,200,0.15);
  box-shadow: 0 0 12px rgba(0,240,200,0.2);
}

/* AI quick button in input bar */
.btn-ai-quick {
  background: transparent; border: 1px solid rgba(0,240,200,0.3);
  border-radius: 50%; width: 32px; height: 32px;
  color: var(--neon); font-size: 14px; cursor: pointer; flex-shrink: 0;
  transition: all 0.2s; display: flex; align-items: center; justify-content: center;
}
.btn-ai-quick:hover {
  background: rgba(0,240,200,0.15);
  box-shadow: 0 0 12px rgba(0,240,200,0.3);
  transform: scale(1.1);
}
.btn-ai-quick.loading {
  animation: spin-glow 1s linear infinite;
  border-color: var(--neon);
}
@keyframes spin-glow {
  0%   { box-shadow: 0 0 8px var(--neon); transform: rotate(0deg); }
  100% { box-shadow: 0 0 16px var(--neon); transform: rotate(360deg); }
}

/* AI message bubble */
.msg-group.ai .msg-bubble {
  background: linear-gradient(135deg, rgba(0,240,200,0.08), rgba(170,0,255,0.08));
  border: 1px solid rgba(0,240,200,0.4);
  border-bottom-left-radius: 3px;
  position: relative;
}
.msg-group.ai .msg-bubble::before {
  content: "⬡ AI";
  position: absolute; top: -10px; left: 10px;
  font-size: 8px; font-family: var(--font-mono); letter-spacing: 2px;
  color: var(--neon); background: var(--bg);
  padding: 0 6px; border-radius: 3px;
}
.msg-group.ai .msg-author { color: var(--neon) !important; }

/* Modal */
.modal-overlay {
  display: none; position: absolute; inset: 0; z-index: 500;
  background: rgba(5,8,16,0.85); backdrop-filter: blur(4px);
  align-items: center; justify-content: center;
}
.modal-overlay.open { display: flex; }

.modal-box {
  width: 420px; max-width: 90vw;
  background: var(--panel); border: 1px solid var(--neon);
  border-radius: 12px; padding: 32px;
  box-shadow: 0 0 60px rgba(0,240,200,0.15), 0 0 0 1px rgba(0,240,200,0.05);
  animation: pop-up 0.2s ease;
}
.modal-title {
  font-size: 18px; font-weight: 700; color: var(--neon);
  letter-spacing: 3px; margin-bottom: 14px; font-family: var(--font-mono);
}
.modal-desc {
  font-size: 13px; color: var(--text-dim); line-height: 1.7;
}
.modal-desc a { color: var(--neon2); text-decoration: none; }
.modal-desc a:hover { text-decoration: underline; }
.modal-hint {
  font-size: 11px; font-family: var(--font-mono); color: var(--text-dim);
  margin-top: 12px; line-height: 1.7;
}
.modal-hint code {
  background: var(--bg2); padding: 2px 6px; border-radius: 4px;
  font-size: 11px; color: var(--neon); display: inline-block; margin-top: 4px;
}
.modal-actions {
  display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end;
}
.btn-modal-cancel {
  padding: 9px 18px; background: transparent;
  border: 1px solid var(--border); border-radius: var(--radius);
  color: var(--text-dim); font-family: var(--font-mono); font-size: 11px;
  letter-spacing: 2px; cursor: pointer; transition: all 0.2s;
}
.btn-modal-cancel:hover { border-color: var(--text-dim); color: var(--text); }
.btn-modal-save {
  padding: 9px 18px;
  background: linear-gradient(135deg, rgba(0,240,200,0.2), rgba(0,170,255,0.2));
  border: 1px solid var(--neon); border-radius: var(--radius);
  color: var(--neon); font-family: var(--font-mono); font-size: 11px;
  letter-spacing: 2px; cursor: pointer; transition: all 0.2s;
}
.btn-modal-save:hover {
  background: rgba(0,240,200,0.3);
  box-shadow: 0 0 16px rgba(0,240,200,0.3);
}

/* AI typing dots */
.typing-dots { display: inline-flex; gap: 3px; align-items: center; }
.typing-dots span {
  width: 4px; height: 4px; border-radius: 50%; background: var(--neon);
  animation: dot-bounce 1.2s ease-in-out infinite;
}
.typing-dots span:nth-child(2) { animation-delay: 0.2s; }
.typing-dots span:nth-child(3) { animation-delay: 0.4s; }
@keyframes dot-bounce {
  0%,60%,100% { transform: translateY(0); }
  30%          { transform: translateY(-6px); }
}